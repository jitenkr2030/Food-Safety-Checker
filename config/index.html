<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodSafe AI - Photo Food Safety Checker</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <meta name="theme-color" content="#0057FF">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">üõ°Ô∏è</div>
            <h1>FoodSafe AI</h1>
            <p>Initializing Food Safety Detection...</p>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app" class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">üõ°Ô∏è</span>
                    <span class="logo-text">FoodSafe AI</span>
                </div>
                <nav class="header-nav">
                    <button class="nav-btn" data-lang-toggle>
                        <span class="flag">üáÆüá≥</span>
                        ‡§π‡§ø‡§Ç‡§¶‡•Ä
                    </button>
                    <button class="nav-btn" data-profile-btn>
                        <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                        </svg>
                    </button>
                </nav>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Home Screen -->
            <section id="home-screen" class="screen active">
                <!-- Hero Section -->
                <div class="hero-section">
                    <h1 class="hero-title">Photo ‚Üí Food Safety Checker</h1>
                    <p class="hero-subtitle">AI-powered food safety, nutrition & hygiene analysis</p>
                </div>

                <!-- Camera Section -->
                <div class="camera-section">
                    <div class="camera-container">
                        <video id="camera-video" autoplay playsinline muted></video>
                        <canvas id="camera-canvas" style="display: none;"></canvas>
                        <div id="photo-preview" class="photo-preview" style="display: none;">
                            <img id="preview-image" alt="Captured photo">
                            <button class="retake-btn" data-retake>
                                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                                </svg>
                                Retake
                            </button>
                        </div>
                        
                        <!-- Camera Controls -->
                        <div class="camera-controls">
                            <div class="mode-switcher">
                                <button class="mode-btn active" data-mode="camera">
                                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    </svg>
                                    Live Camera
                                </button>
                                <button class="mode-btn" data-mode="upload">
                                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                    </svg>
                                    Upload Photo
                                </button>
                            </div>
                            
                            <button id="capture-btn" class="capture-btn" disabled>
                                <div class="capture-icon">
                                    <svg width="32" height="32" fill="white" viewBox="0 0 24 24">
                                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                    </svg>
                                </div>
                            </button>
                        </div>

                        <!-- Upload Section -->
                        <div id="upload-section" class="upload-section" style="display: none;">
                            <div class="upload-area" data-upload-area>
                                <svg width="48" height="48" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                </svg>
                                <h3>Upload Food Photo</h3>
                                <p>Tap to select image or drag & drop</p>
                                <input type="file" id="file-input" accept="image/*" style="display: none;">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Analysis Section -->
                <div id="analysis-section" class="analysis-section" style="display: none;">
                    <div class="analysis-header">
                        <h2>Analyzing Food Safety...</h2>
                        <div class="analysis-progress">
                            <div class="progress-step active" data-step="1">
                                <div class="step-icon">üõ°Ô∏è</div>
                                <span>Safety Scan</span>
                            </div>
                            <div class="progress-step" data-step="2">
                                <div class="step-icon">üî¨</div>
                                <span>Chemical Analysis</span>
                            </div>
                            <div class="progress-step" data-step="3">
                                <div class="step-icon">üìä</div>
                                <span>Nutrition Info</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="analysis-loading">
                        <div class="loading-spinner"></div>
                        <p>AI is examining your food...</p>
                    </div>
                </div>

                <!-- Results Section -->
                <div id="results-section" class="results-section" style="display: none;">
                    <!-- Freshness Score Hero -->
                    <div class="freshness-card">
                        <div class="freshness-score">
                            <canvas id="freshness-gauge" width="200" height="200"></canvas>
                            <div class="score-content">
                                <span id="freshness-score" class="score-number">0</span>
                                <span class="score-label">Freshness Score</span>
                                <span id="freshness-rating" class="score-rating">Excellent</span>
                            </div>
                        </div>
                    </div>

                    <!-- Safety Metrics -->
                    <div class="safety-metrics">
                        <h3>Safety Analysis</h3>
                        <div class="metrics-grid" id="metrics-grid">
                            <!-- Metrics will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Recommendations -->
                    <div class="recommendations-card">
                        <h3>AI Recommendations</h3>
                        <div class="recommendations-list" id="recommendations-list">
                            <!-- Recommendations will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="action-buttons">
                        <button class="btn btn-primary" data-generate-report>
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                            Generate Report
                        </button>
                        <button class="btn btn-secondary" data-share-result>
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"/>
                            </svg>
                            Share
                        </button>
                    </div>
                </div>
            </section>

            <!-- History Screen -->
            <section id="history-screen" class="screen">
                <div class="history-header">
                    <h2>Analysis History</h2>
                    <button class="btn btn-ghost" data-clear-history>
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                        </svg>
                        Clear All
                    </button>
                </div>
                <div class="history-list" id="history-list">
                    <!-- History items will be populated by JavaScript -->
                </div>
            </section>

            <!-- Profile Screen -->
            <section id="profile-screen" class="screen">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <div class="avatar-placeholder">üë§</div>
                    </div>
                    <div class="profile-info">
                        <h2>Food Safety User</h2>
                        <p>Premium Member</p>
                    </div>
                </div>

                <div class="profile-stats">
                    <div class="stat-card">
                        <div class="stat-value">47</div>
                        <div class="stat-label">Foods Analyzed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">12</div>
                        <div class="stat-label">Risks Detected</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">98%</div>
                        <div class="stat-label">Accuracy Rate</div>
                    </div>
                </div>

                <div class="profile-settings">
                    <h3>Settings</h3>
                    <div class="settings-list">
                        <div class="setting-item">
                            <span>Notifications</span>
                            <label class="toggle">
                                <input type="checkbox" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <span>Auto-save Analysis</span>
                            <label class="toggle">
                                <input type="checkbox" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <span>Dark Mode</span>
                            <label class="toggle">
                                <input type="checkbox">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="profile-actions">
                    <button class="btn btn-ghost" data-about>
                        About FoodSafe AI
                    </button>
                    <button class="btn btn-ghost" data-privacy>
                        Privacy Policy
                    </button>
                    <button class="btn btn-ghost" data-support>
                        Support & Feedback
                    </button>
                </div>
            </section>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-nav="home">
                <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"/>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v6H8V5z"/>
                </svg>
                <span>Home</span>
            </button>
            <button class="nav-item" data-nav="history">
                <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                <span>History</span>
            </button>
            <button class="nav-item" data-nav="profile">
                <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                </svg>
                <span>Profile</span>
            </button>
        </nav>
    </div>

    <!-- Report Modal -->
    <div id="report-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Food Safety Report</h3>
                <button class="modal-close" data-modal-close>
                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body" id="report-content">
                <!-- Report content will be populated by JavaScript -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-download-pdf>
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                    Download PDF
                </button>
                <button class="btn btn-primary" data-share-report>
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"/>
                    </svg>
                    Share Report
                </button>
            </div>
        </div>
    </div>

    <!-- Disclaimer Modal -->
    <div id="disclaimer-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚ö†Ô∏è Important Disclaimer</h3>
            </div>
            <div class="modal-body">
                <div class="disclaimer-content">
                    <div class="disclaimer-icon">üõ°Ô∏è</div>
                    <p><strong>FoodSafe AI</strong> provides visual safety signals based on photo analysis. This is <strong>NOT</strong> a medical or laboratory test.</p>
                    <ul>
                        <li>Results are estimates and should be used as guidance only</li>
                        <li>Always trust your senses (sight, smell, taste)</li>
                        <li>For medical concerns, consult healthcare professionals</li>
                        <li>Food safety standards may vary by region</li>
                    </ul>
                    <p class="disclaimer-note">By using this app, you acknowledge that analysis results are for informational purposes only.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" data-accept-disclaimer>
                    I Understand
                </button>
            </div>
        </div>
    </div>

    <script src="scripts/app.js"></script>
</body>
</html>